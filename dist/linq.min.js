/*! linqjs v0.1.0 */
!function(a,b){"use strict";function c(a){var b=a.length,c=d(a);return"window"===c?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()}var e=a.linq={},f=e.enumerable=function(a){return this instanceof f?(this.enumerator=function(){return new a},void 0):new f(a)};e.fn=f.prototype,e.extend=function(a){var b;for(b in a)a.hasOwnProperty(b)&&(e.fn[b]=a[b])},e.from=a.from=function(a){if(!c(a)){var b,d=a;a=[];for(b in d)d.hasOwnProperty(b)&&a.push({key:b,value:d[b]})}return new f(function(){var b=-1,c=a.length;this.current=function(){return 0>b||b>=c?null:a[b]},this.next=function(){return++b<c}})};var g=/^\(? *([a-zA-Z_$]+[a-zA-Z_$0-9]* *(?:, *[a-zA-Z_$]+[a-zA-Z_$0-9]* *)*)?\)?$/,h=/^\| *([a-zA-Z_$]+[a-zA-Z_$0-9]* *(?:, *[a-zA-Z_$]+[a-zA-Z_$0-9]* *)*)\|/;e.lambda=function(a){if("string"!==d(a))return a;a=a.trim();var b,c;if(h.test(a))b=a.match(h)[1],c=a.substr(a.indexOf("|",1)+1);else{if(-1===a.indexOf("=>"))throw new SyntaxError("Not a valid lambda expression. Example: x => x.foo");var e=a.split("=>");if(b=e[0].trim(),c=e[1],""===b)throw new SyntaxError("Lambda signature missing. For a parameterless signature, use: () => 42");if(!g.test(b))throw new SyntaxError("Lambda signature is invalid.");b=b.match(g)[1]}if(c=(c||"").trim(),""===c)throw new SyntaxError("Lambda must return something.");return new Function(b,"return "+c)},e.extend({select:function(a){a=e.lambda(a);var b=this,c=b.enumerator();return e.enumerable(function(){var d=null;this.current=function(){return d},this.next=function(){var e;return d=(e=c.next())?a.call(b,c.current()):null,e}})},where:function(a){a=e.lambda(a);var b=this,c=b.enumerator();return e.enumerable(function(){var d=null;this.current=function(){return d},this.next=function(){for(;c.next();)if(a.call(b,c.current()))return d=c.current(),!0;return!1}})}}),e.extend({each:function(a){for(var b=this.enumerator(),c=0;b.next()&&a.call(this,b.current(),c++)!==!1;);},array:function(){for(var a=[],b=this.enumerator();b.next();)a.push(b.current());return a},first:function(a){a=e.lambda(a);var b=a?this.where(a).enumerator():this.enumerator();return b.next(),b.current()},count:function(a){a=e.lambda(a);for(var b=a?this.where(a).enumerator():this.enumerator(),c=0;b.next();)c++;return c},hash:function(a,c){var d,f,g,h=this,i={},j=this.enumerator(),k=arguments.length>0&&!!a,l=arguments.length>1,m=0;for(a=e.lambda(a),c=e.lambda(c);j.next();)g=j.current(),d=k?a.call(h,g):g.hasOwnProperty("key")&&g.key!==b?g.key:m,f=l?c.call(h,g):g.hasOwnProperty("value")&&g.value!==b?g.value:g,i[d]=f,m++;return i}})}(window);